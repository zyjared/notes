# 平衡二叉树

## 定义

平衡二叉树（Balanced Binary Tree）是一种改进的二叉搜索树，旨在防止因不平衡导致的最坏时间复杂度 $O(n)$。平衡二叉树通过维护树的平衡性质，保证每个结点的左右子树高度差不超过一定限制，从而使操作的时间复杂度接近 $O(\log n)$。

## 常见的平衡二叉树类型

### AVL 树

AVL树（英语：AVL tree）是计算机科学中最早被发明的自平衡二叉查找树。在 AVL 树中，任一结点对应的两棵子树的最大高度差为 1，因此它也被称为高度平衡树。

查找、插入和删除在平均和最坏情况下的时间复杂度都是 $O(\log n)$。

增加和删除元素的操作则可能需要借由一次或多次树旋转，以实现树的重新平衡。

> 详细与图例见 [AVL 树](https://zh.wikipedia.org/wiki/AVL%E6%A0%91)

::: details 点击查看代码
::: code-group
<<< ./code/AVL-tree.py [python]
:::

### 红黑树

在平衡二叉树性质的基础上，红黑树需要满足以下五条性质：

- 每个结点是红色或黑色。
- 根结点始终是黑色。
- 所有叶子结点都是黑色的空结点（NIL 结点）。
  - 叶子结点指的是树中不存在的子结点，用 NIL 表示。
- 红黑性质：红色结点的子结点必须是黑色（即不存在两个连续的红色结点）。
- 黑高性质：从任一结点到其每个叶子结点的路径中，包含相同数量的黑色结点，确保了树的平衡性。
  - 平衡二叉树性质 + 红黑性质 可得黑高性质
  - 不包括 NIL 结点

> 详细与图例见 [红黑树](https://zh.wikipedia.org/wiki/红黑树)

::: details 点击查看代码
::: code-group
<<< ./code/red-black-tree.py [python]
:::
